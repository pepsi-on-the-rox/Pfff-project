@model IEnumerable<Pfff.Models.Camera>
@using System.Globalization

@{
    ViewData["Title"] = "Home Page";
   
}


<style>
    #map {
        position: absolute;
        top: 58px;
        bottom: 0;
        left: 0;
        right: 0;
    }
</style>

<div id="map">
    <a href="https://www.maptiler.com" style="position:absolute;left:10px;bottom:10px;z-index:999;"><img src="https://api.maptiler.com/resources/logo.svg" alt="MapTiler logo"></a>
</div>
<p><a href="https://www.maptiler.com/copyright/" target="_blank">© MapTiler</a> <a href="https://www.openstreetmap.org/copyright" target="_blank">© OpenStreetMap contributors</a></p>

<script>




    var map = L.map('map').setView([50.88326, 5.96211], 17);

    var popup = L.popup();

    function onMapClick(e) 
    {
        //Popup voor wanneer je op de map klikt
        var locatie = e.latlng.lat.toString() + ", " + e.latlng.lng.toString();
        sessionStorage.setItem("Locatie", locatie);

        var link = '@Url.Action("Create", "Camera", new{Locatie = "replace"})';
        link = link.replace("replace", locatie); 

        

        popup
            .setLatLng(e.latlng)
            .setContent("<a href='" + link + "'class='button'>Plaats hier een Camera</a>")
            .openOn(map);

            

    }
   
    map.on('click', onMapClick);
 
    var gl = L.mapboxGL({
        attribution: "\u003ca href=\"https://www.maptiler.com/copyright/\" target=\"_blank\"\u003e\u0026copy; MapTiler\u003c/a\u003e \u003ca href=\"https://www.openstreetmap.org/copyright\" target=\"_blank\"\u003e\u0026copy; OpenStreetMap contributors\u003c/a\u003e",
        style: 'https://api.maptiler.com/maps/streets-v2/style.json?key=7e5vZsXTdPmqMQVPZPx2'
    }).addTo(map);

       
    
               


</script>



@{
    //Maakt alle markers aan van de database met popups
    string markers = " ";

    foreach (var obj in Model)
    {
       markers = "  L.marker([" + Convert.ToString(obj.Locatie) + "]).addTo(map);";

    <script>var marker = @markers
                                          marker.bindPopup("<b>Camera ID: </b>@Convert.ToString(obj.CameraID)<br><b>Merk: </b>@Convert.ToString(obj.Specificatie)<br><b>Beschrijving: </b><br> @Convert.ToString(obj.Beschrijving)  ").openPopup();
                                                                                                    
    </script>


    }
}